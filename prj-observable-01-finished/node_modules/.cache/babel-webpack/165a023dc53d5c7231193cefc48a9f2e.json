{"ast":null,"code":"import _get from \"/Users/momodoujammeh/Developement/angular/Assignments/prj-observable-01-finished/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"/Users/momodoujammeh/Developement/angular/Assignments/prj-observable-01-finished/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/momodoujammeh/Developement/angular/Assignments/prj-observable-01-finished/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/momodoujammeh/Developement/angular/Assignments/prj-observable-01-finished/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _classCallCheck from \"/Users/momodoujammeh/Developement/angular/Assignments/prj-observable-01-finished/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/momodoujammeh/Developement/angular/Assignments/prj-observable-01-finished/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { async } from '../scheduler/async';\nimport { isDate } from '../util/isDate';\nimport { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';\nexport function timeoutWith(due, withObservable) {\n  var scheduler = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : async;\n  return function (source) {\n    var absoluteTimeout = isDate(due);\n    var waitFor = absoluteTimeout ? +due - scheduler.now() : Math.abs(due);\n    return source.lift(new TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler));\n  };\n}\n\nvar TimeoutWithOperator = /*#__PURE__*/function () {\n  function TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler) {\n    _classCallCheck(this, TimeoutWithOperator);\n\n    this.waitFor = waitFor;\n    this.absoluteTimeout = absoluteTimeout;\n    this.withObservable = withObservable;\n    this.scheduler = scheduler;\n  }\n\n  _createClass(TimeoutWithOperator, [{\n    key: \"call\",\n    value: function call(subscriber, source) {\n      return source.subscribe(new TimeoutWithSubscriber(subscriber, this.absoluteTimeout, this.waitFor, this.withObservable, this.scheduler));\n    }\n  }]);\n\n  return TimeoutWithOperator;\n}();\n\nvar TimeoutWithSubscriber = /*#__PURE__*/function (_SimpleOuterSubscribe) {\n  _inherits(TimeoutWithSubscriber, _SimpleOuterSubscribe);\n\n  var _super = _createSuper(TimeoutWithSubscriber);\n\n  function TimeoutWithSubscriber(destination, absoluteTimeout, waitFor, withObservable, scheduler) {\n    var _this;\n\n    _classCallCheck(this, TimeoutWithSubscriber);\n\n    _this = _super.call(this, destination);\n    _this.absoluteTimeout = absoluteTimeout;\n    _this.waitFor = waitFor;\n    _this.withObservable = withObservable;\n    _this.scheduler = scheduler;\n\n    _this.scheduleTimeout();\n\n    return _this;\n  }\n\n  _createClass(TimeoutWithSubscriber, [{\n    key: \"scheduleTimeout\",\n    value: function scheduleTimeout() {\n      var action = this.action;\n\n      if (action) {\n        this.action = action.schedule(this, this.waitFor);\n      } else {\n        this.add(this.action = this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout, this.waitFor, this));\n      }\n    }\n  }, {\n    key: \"_next\",\n    value: function _next(value) {\n      if (!this.absoluteTimeout) {\n        this.scheduleTimeout();\n      }\n\n      _get(_getPrototypeOf(TimeoutWithSubscriber.prototype), \"_next\", this).call(this, value);\n    }\n  }, {\n    key: \"_unsubscribe\",\n    value: function _unsubscribe() {\n      this.action = undefined;\n      this.scheduler = null;\n      this.withObservable = null;\n    }\n  }], [{\n    key: \"dispatchTimeout\",\n    value: function dispatchTimeout(subscriber) {\n      var withObservable = subscriber.withObservable;\n\n      subscriber._unsubscribeAndRecycle();\n\n      subscriber.add(innerSubscribe(withObservable, new SimpleInnerSubscriber(subscriber)));\n    }\n  }]);\n\n  return TimeoutWithSubscriber;\n}(SimpleOuterSubscriber);","map":{"version":3,"sources":["../../../src/internal/operators/timeoutWith.ts"],"names":[],"mappings":";;;;;;AAEA,SAAS,KAAT,QAAsB,oBAAtB;AAEA,SAAS,MAAT,QAAuB,gBAAvB;AAEA,SAAS,qBAAT,EAAgC,cAAhC,EAAgD,qBAAhD,QAA6E,mBAA7E;AA2DA,OAAM,SAAU,WAAV,CAA4B,GAA5B,EAC4B,cAD5B,EAE4D;EAAA,IAAhC,SAAgC,uEAAL,KAAK;EAChE,OAAO,UAAC,MAAD,EAA0B;IAC/B,IAAI,eAAe,GAAG,MAAM,CAAC,GAAD,CAA5B;IACA,IAAI,OAAO,GAAG,eAAe,GAAI,CAAC,GAAD,GAAO,SAAS,CAAC,GAAV,EAAX,GAA8B,IAAI,CAAC,GAAL,CAAiB,GAAjB,CAA3D;IACA,OAAO,MAAM,CAAC,IAAP,CAAY,IAAI,mBAAJ,CAAwB,OAAxB,EAAiC,eAAjC,EAAkD,cAAlD,EAAkE,SAAlE,CAAZ,CAAP;EACD,CAJD;AAKD;;IAEK,mB;EACJ,6BAAoB,OAApB,EACoB,eADpB,EAEoB,cAFpB,EAGoB,SAHpB,EAG4C;IAAA;;IAHxB,KAAA,OAAA,GAAA,OAAA;IACA,KAAA,eAAA,GAAA,eAAA;IACA,KAAA,cAAA,GAAA,cAAA;IACA,KAAA,SAAA,GAAA,SAAA;EACnB;;;;WAED,cAAK,UAAL,EAAgC,MAAhC,EAA2C;MACzC,OAAO,MAAM,CAAC,SAAP,CAAiB,IAAI,qBAAJ,CACtB,UADsB,EACV,KAAK,eADK,EACY,KAAK,OADjB,EAC0B,KAAK,cAD/B,EAC+C,KAAK,SADpD,CAAjB,CAAP;IAGD;;;;;;IAQG,qB;;;;;EAIJ,+BAAY,WAAZ,EACoB,eADpB,EAEoB,OAFpB,EAGoB,cAHpB,EAIoB,SAJpB,EAI4C;IAAA;;IAAA;;IAC1C,0BAAM,WAAN;IAJkB,MAAA,eAAA,GAAA,eAAA;IACA,MAAA,OAAA,GAAA,OAAA;IACA,MAAA,cAAA,GAAA,cAAA;IACA,MAAA,SAAA,GAAA,SAAA;;IAElB,MAAK,eAAL;;IAF0C;EAG3C;;;;WAQO,2BAAe;MACrB,IAAQ,MAAR,GAAmB,IAAnB,CAAQ,MAAR;;MACA,IAAI,MAAJ,EAAY;QAMV,KAAK,MAAL,GAA8D,MAAM,CAAC,QAAP,CAAgB,IAAhB,EAAsB,KAAK,OAA3B,CAA9D;MACD,CAPD,MAOO;QACL,KAAK,GAAL,CAAS,KAAK,MAAL,GAA8D,KAAK,SAAL,CAAe,QAAf,CACrE,qBAAqB,CAAC,eAD+C,EACvB,KAAK,OADkB,EACT,IADS,CAAvE;MAGD;IACF;;;WAES,eAAM,KAAN,EAAc;MACtB,IAAI,CAAC,KAAK,eAAV,EAA2B;QACzB,KAAK,eAAL;MACD;;MACD,iFAAY,KAAZ;IACD;;;WAGD,wBAAY;MACV,KAAK,MAAL,GAAc,SAAd;MACA,KAAK,SAAL,GAAiB,IAAjB;MACA,KAAK,cAAL,GAAsB,IAAtB;IACD;;;WAlCO,yBAA6B,UAA7B,EAAoE;MAC1E,IAAQ,cAAR,GAA2B,UAA3B,CAAQ,cAAR;;MACA,UAAU,CAAC,sBAAX;;MACA,UAAU,CAAC,GAAX,CAAe,cAAc,CAAC,cAAD,EAAiB,IAAI,qBAAJ,CAA0B,UAA1B,CAAjB,CAA7B;IACD;;;;EAjBuC,qB","sourcesContent":["import { async } from '../scheduler/async';\nimport { isDate } from '../util/isDate';\nimport { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';\nexport function timeoutWith(due, withObservable, scheduler = async) {\n    return (source) => {\n        let absoluteTimeout = isDate(due);\n        let waitFor = absoluteTimeout ? (+due - scheduler.now()) : Math.abs(due);\n        return source.lift(new TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler));\n    };\n}\nclass TimeoutWithOperator {\n    constructor(waitFor, absoluteTimeout, withObservable, scheduler) {\n        this.waitFor = waitFor;\n        this.absoluteTimeout = absoluteTimeout;\n        this.withObservable = withObservable;\n        this.scheduler = scheduler;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new TimeoutWithSubscriber(subscriber, this.absoluteTimeout, this.waitFor, this.withObservable, this.scheduler));\n    }\n}\nclass TimeoutWithSubscriber extends SimpleOuterSubscriber {\n    constructor(destination, absoluteTimeout, waitFor, withObservable, scheduler) {\n        super(destination);\n        this.absoluteTimeout = absoluteTimeout;\n        this.waitFor = waitFor;\n        this.withObservable = withObservable;\n        this.scheduler = scheduler;\n        this.scheduleTimeout();\n    }\n    static dispatchTimeout(subscriber) {\n        const { withObservable } = subscriber;\n        subscriber._unsubscribeAndRecycle();\n        subscriber.add(innerSubscribe(withObservable, new SimpleInnerSubscriber(subscriber)));\n    }\n    scheduleTimeout() {\n        const { action } = this;\n        if (action) {\n            this.action = action.schedule(this, this.waitFor);\n        }\n        else {\n            this.add(this.action = this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout, this.waitFor, this));\n        }\n    }\n    _next(value) {\n        if (!this.absoluteTimeout) {\n            this.scheduleTimeout();\n        }\n        super._next(value);\n    }\n    _unsubscribe() {\n        this.action = undefined;\n        this.scheduler = null;\n        this.withObservable = null;\n    }\n}\n//# sourceMappingURL=timeoutWith.js.map"]},"metadata":{},"sourceType":"module"}